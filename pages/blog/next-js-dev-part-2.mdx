---
title: 'NextJS Workflow Part 2: The Official Tutorial'
date: '2020-07-18'
blurb: "NextJS provides a pretty thorough tutorial for creating a basic blog. However, the big picture sometimes gets lost in the details. Nonetheless, the tutorial is worth the time it takes to go through it, at least for exposure to NextJS architecture."
layout: 'BlogPostLayout' 
---

<div style={{color: 'blue'}}>Building a NextJS Blog: Part 2</div>

NextJS provides a great [tutorial](https://nextjs.org/learn/basics/create-nextjs-app?utm_source=next-site&utm_medium=homepage-cta&utm_campaign=next-website) for getting exposure to how the framework works, however I found that it took some time
to adapt what I had learned in the tutorial to making a blog the way I wanted to make it, not just making a clone of
the blog made in the tutorial.

## How the tutorial is structured
The end product from the tutorial is a simple blog. You'll get some exposure to concepts like: 
* how to organize your files to take advantage of NextJS routing
* where to store static files and assets in your file structure
* how to inject props into your components (keep in mind, we don't have redux here)
* dynamic routing

What the tutorial didn't cover:
* how data is passed from your markdown files (i.e. your blog posts) to the components you might want to use to render your pages
* implementing mdx parsing (the tutorial focuses on parsing .md files only)

Part of the reason I went with NextJS was to have more control over the rendering of pages in my blog. It took me /a while/ to 
go from their tutorial to successfully making the kind of blog I had in mind. I don't think that's necessarily a fault of 
the NextJS tutorial, but I do think their tutorial makes the process seem more complex than it is. In the end,
I figured out that the reason I was running into difficulty making my own blog was that I didn't really get a good grasp
on some of the fundamentals of NextJS, despite going through their tutorial. Hence, I'll be adding a few more blog posts
that talk about how I made this site specifically.

## High level concepts that will come in useful later 

### 1. How the filesystem in your project translates to routes generated by NextJS 
This one is pretty simple, but the tutorial obfuscates it a bit. In the root directory of project, there is a `pages/`
subdirectory. The pages to be rendered by your site will be stored here. For instance, here's a glimpse at my `pages/`
subdirectory for this site:
```text {7,8,10,12}
pages 
├── blog
│   ├── initial-commit.mdx
│   ├── next-js-dev-overview.mdx
│   ├── next-js-dev-part-1.mdx
│   └── next-js-dev-part-2.mdx
├── blog.js
├── index.js
├── projects
├── projects.js
├── workflows
└── workflows.js
```
The highlighted lines are the files that I want to be able to access as a "main page": For instance:
* `blog.js` should be rendered when the `/blog` route is accessed
* `index.js` should be rendered when the `/` is accessed 
    * (NextJS will know to go use the file named `index.js` for the `/` route)
* `projects.js` should be rendered when the `/projects` route is accessed
* `workflows.js` should be rendered when the `/workflows` route is accessed

Now, I not only want to access the main pages I highlighted above, but I also want to be able to access
pages nested within each of these categories ("blog", "projects", and "workflows"). In other words, I will store
my .md or .mdx files in the appropriate directory (i.e. a blog post will go into `/blog`), and then I can expect
the content from this file to be used when I access a route structured like: `/blog/initial-commit`.

### 2. Getting static props into your components
This section is specifically about injecting props into a page in the `/pages` directory. For instance,
in my `blog.js` file that will be displayed when I go to the `/blog` route, I want to show a list of blog posts.
Where do I get this data from? NextJS can help with this using the convention of adding a function called `getStaticProps`
to the bottom of your page file. 

For now, I'm specifically talking about `.js` files that will be rendered, not components that will be used in those 
files or the `.md` content files. I'll come back to those later, but basically the content from `.md` files will be rendered
as a child of a layout file of some kind. Perhaps a useful distinction here is that I'm talking about the static
pages I will be generating, not the dynamically routed ones. Hence, I guess, the name get*Static*Props.

So, at the bottom of your "static" pages, a function like this will be added:
```js {5}
export async function getStaticProps() {
  const blogPostsData = getSortedPostsData("blog");
  return {
    props: {
      posts: blogPostsData
    }
  };
}
```
This is the function I use to inject my `blog.js` default export with data. The `getSortedPostsData` function is a utility
function I wrote, and the tutorial will talk about utility functions like this as well. The highlighted line shows
the name of the props I'm injecting into my component. In this case, there is only one prop, and it's named `posts`. 


### 3. Take the content injection parts of the tutorial with a grain of salt
In the rest of my posts, I will talk about using `.mdx` files, however the NextJS tutorial will focus on `.md` files. 
They go into some detail on how to handle `.md` files, and it's worth understanding what they are doing in those steps of the tutorial
so you can get an understanding of how the process works. However, I'll veer away from some of their markdown parsing
functionality when I start talking about the specifics of how I made *this* site.

That being said, do take to heart what they say about processing frontmatter. I did end up using frontmatter for this site
even though I'm using an MDX parser. I also think formatting your content files with frontmatter makes them more likely to be reusable
with other static site generators, in case you ever want to switch.

